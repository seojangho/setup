#!/bin/bash

trap "timew stop; notify-send --icon=gnome-pomodoro \"Stopped pomodoro\" \"Come back when you're ready\"; exit 0" SIGTERM

while true
do
  zenity --info --icon-name=gnome-pomodoro --title "Pomodoro" --text "$(timew)""\nStart your task. You have 25 minutes!" &
  sleep 25m &
  wait $!

  timew_result="$(timew)"
  zenity --info --icon-name=gnome-pomodoro --title "Pomodoro" --text "$timew_result""\nGet some rest. You have 5 minutes." &
  timew stop
  sleep 5m &
  wait $!

  timew continue
done
