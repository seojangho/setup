#!/bin/bash

# Clone password-store from git repository
# We execute "pass git init" to get some git configs like "diff.gpg.binary"

set -e
DIR="$HOME/.password-store"
KEY="747878B59550884E69C355711BCF94C599B2D78F"

[[ -e "$DIR" ]] && echo "$DIR already exists" && exit 1
pass init "$KEY"
pass git init
pass git config --bool --add pass.signcommits true
pass git config user.signingkey "$KEY"
pass git remote add origin ssh://mango.jangho.kr:50022/git/pass.git
pass git fetch
pass git reset --hard origin/master

echo "password-store activated. Have a very safe day."
exit 0
