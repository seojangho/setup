export PATH="$HOME/.setup/hosts/pear/scripts:$PATH"

# shutdown
alias poweroff='~/.setup/hosts/pear/scripts/lemon-is-safe-for-shutdown && ~/.setup/scripts/bin/scrub-is-safe-for-shutdown && sudo /usr/bin/poweroff'
alias reboot='~/.setup/hosts/pear/scripts/lemon-is-safe-for-shutdown && ~/.setup/scripts/bin/scrub-is-safe-for-shutdown && sudo /usr/bin/reboot'

# VM (lemon)
alias lemon-status='echo lemon && vboxmanage showvminfo lemon | grep --color=no -e "State:"'
alias lemon-start='vboxmanage startvm --type headless lemon'

# Firefox
alias firefox-private='firefox --profile ~/.mozilla/firefox/jadmngzl.private'

# peach
function peach-snapshot() {
  gpg --decrypt ~/.secret/bitlocker/peach/BitLocker\ 복구\ 키\ 5F85013F-5950-4AB9-83B6-AB8604DA4BD1.TXT.gpg \
    2>/dev/null | dd bs=1 skip=411 count=115 2>/dev/null
  sudo qemu-system-x86_64 -bios /usr/share/ovmf/x64/OVMF_CODE.fd \
    -enable-kvm -smp cores=4 -m 6144M \
    -drive file=/dev/sdb,format=raw,if=virtio \
    -net nic -net user,hostfwd=tcp::3389-:3389 -boot menu=on -snapshot
}

# reboot to peach (Windows)
function peach-reboot() {
  local windows_num
  windows_num=$(efibootmgr | grep 'Windows Boot Manager'| cut -b5-8)
  sudo efibootmgr --bootnext "$windows_num"
  sudo reboot
}
