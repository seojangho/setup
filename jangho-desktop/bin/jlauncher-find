#!/bin/bash

set -euo pipefail

cd "${HOME}"
selected=${HOME}/$(find -L . -not -path '*/\.*' -print0 | fzf --read0 --reverse)
quoted=''
for arg in "${selected[@]}"; do
  quoted="${quoted} $(printf "%q" "${arg}")"
done

if [[ -d "${selected}" ]]; then
  exec swaymsg exec -- pcmanfm "${quoted}"
else
  exec swaymsg exec -- xdg-open "${quoted}"
fi
