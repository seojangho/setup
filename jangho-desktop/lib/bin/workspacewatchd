#!/bin/bash

set -euo pipefail

BINDIR=${HOME}/.setup/jangho-desktop/lib/bin

while :; do
  swaymsg -t subscribe '["workspace"]' > /dev/null 2>&1 || exit 0
  current=$(swaymsg -t get_workspaces) || continue
  focused=$(echo "${current}" | "${BINDIR}/parse_workspaces" --print-focused-workspace-name) || continue
  desc=$(echo "${current}" | "${BINDIR}/parse_workspaces") || continue
  jdunstify swayworkspace --timeout=5000 "Workspace ${focused}" "${desc}" || continue
done
